<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0d0d0f">
  <meta name="description" content="MudForge - A Modern MUD Experience">
  <title>MudForge</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Setup Wizard (shown on first run) -->
  <div id="setup-wizard" class="hidden"></div>

  <!-- Launcher (shown before login) -->
  <div id="launcher" class="launcher">
    <div class="launcher-background"></div>
    <div class="launcher-card">
      <!-- Fantasy Art Panel -->
      <div class="launcher-art">
        <img src="images/login_background.jpg" alt="Fantasy landscape with mountains and campfire" class="launcher-art-image">
      </div>
      <!-- Login Form Panel -->
      <div class="launcher-content">
        <div class="launcher-hero">
          <h1 class="launcher-title">MudForge</h1>
          <p class="launcher-tagline">Your Adventure Awaits</p>
        </div>
        <div class="launcher-login">
          <div class="login-form">
            <input type="text" id="login-username" placeholder="Character Name" autocomplete="username" autocapitalize="none" spellcheck="false">
            <input type="password" id="login-password" placeholder="Password" autocomplete="current-password">
            <button id="login-btn" class="login-button">Login</button>
            <div id="login-error" class="login-error"></div>
          </div>
        </div>
        <!-- Latest Announcement Card (shown when announcements exist) -->
        <div id="announcement-section" class="announcement-section hidden">
          <div class="announcement-card">
            <div class="announcement-icon">ðŸ“¢</div>
            <div class="announcement-content">
              <h3 id="announcement-title"></h3>
              <p id="announcement-preview"></p>
            </div>
            <div class="announcement-arrow">â†’</div>
          </div>
        </div>
        <a href="#" class="news-cta">View News & Announcements â†’</a>
        <!-- Powered by MudForge -->
        <div class="powered-by-wrapper">
          <a href="https://www.mudforge.org" target="_blank" rel="noopener" class="powered-by">
          <svg viewBox="0 0 24 24" class="mudforge-logo">
            <!-- Simplified anvil/hammer logo -->
            <circle cx="12" cy="12" r="11" fill="#1a1a2e" stroke="#f59e0b" stroke-width="1"/>
            <!-- Anvil base -->
            <path d="M6 16 L18 16 L16 18 L8 18 Z" fill="#64748b"/>
            <!-- Anvil top -->
            <rect x="8" y="13" width="8" height="3" rx="0.5" fill="#94a3b8"/>
            <!-- Hammer -->
            <rect x="11" y="6" width="2" height="8" rx="0.5" fill="#78350f" transform="rotate(-30 12 10)"/>
            <rect x="8" y="5" width="6" height="3" rx="0.5" fill="#f59e0b" transform="rotate(-30 12 10)"/>
            <!-- Sparks -->
            <circle cx="15" cy="11" r="0.8" fill="#fbbf24"/>
            <circle cx="16" cy="9" r="0.5" fill="#f59e0b"/>
            <circle cx="14" cy="8" r="0.6" fill="#fbbf24"/>
          </svg>
          <span>Powered by MudForge</span>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Registration Modal (overlays launcher) -->
  <div id="register-modal" class="register-modal hidden">
    <div class="register-backdrop"></div>
    <div class="register-content">
      <div class="register-header">
        <h2>Create Your Character</h2>
        <p class="register-subtitle">Choose your identity and begin your adventure</p>
      </div>

      <div class="register-form">
        <div class="register-layout">
          <!-- Left Column: Account Details -->
          <div class="register-column register-account">
            <h3 class="register-section-title">Account Details</h3>
            <div class="register-field">
              <label for="reg-name">Character Name</label>
              <input type="text" id="reg-name" placeholder="Enter name" autocomplete="username" autocapitalize="none" spellcheck="false" readonly>
            </div>
            <div class="register-field">
              <label for="reg-password">Password</label>
              <input type="password" id="reg-password" placeholder="6+ characters" autocomplete="new-password">
            </div>
            <div class="register-field">
              <label for="reg-confirm">Confirm Password</label>
              <input type="password" id="reg-confirm" placeholder="Confirm password" autocomplete="new-password">
            </div>
            <div class="register-field">
              <label for="reg-email">Email (Optional)</label>
              <input type="email" id="reg-email" placeholder="For account recovery" autocomplete="email">
            </div>
            <div class="register-field">
              <label for="reg-gender">Gender</label>
              <select id="reg-gender">
                <option value="">Select gender</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="neutral">Neutral</option>
              </select>
            </div>
          </div>

          <!-- Center Column: Race Selection -->
          <div class="register-column register-race">
            <h3 class="register-section-title">Choose Your Race</h3>
            <div class="race-picker-layout">
              <div id="reg-race-picker" class="race-picker"></div>
              <div id="race-details" class="race-details">
                <div class="race-details-placeholder">
                  <span>Select a race to view details</span>
                </div>
                <div class="race-details-content hidden">
                  <h4 id="race-name"></h4>
                  <p id="race-description"></p>
                  <div id="race-bonuses"></div>
                  <div id="race-abilities"></div>
                  <div id="race-restrictions"></div>
                </div>
              </div>
            </div>
            <input type="hidden" id="reg-race" value="human">
          </div>

          <!-- Right Column: Avatar Selection -->
          <div class="register-column register-avatar">
            <h3 class="register-section-title">Choose Your Avatar</h3>
            <div id="reg-avatar-picker" class="avatar-picker"></div>
            <input type="hidden" id="reg-avatar" value="">
          </div>
        </div>

        <div class="register-footer">
          <div id="reg-error" class="register-error"></div>
          <div class="register-buttons">
            <button id="reg-cancel" class="register-button secondary">Cancel</button>
            <button id="reg-submit" class="register-button primary">Create Character</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Announcement Detail Modal -->
  <div id="announcement-modal" class="announcement-modal hidden">
    <div class="announcement-modal-backdrop"></div>
    <div class="announcement-modal-container">
      <div class="announcement-modal-header">
        <h2 class="announcement-modal-title"></h2>
        <button class="announcement-modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="announcement-modal-meta"></div>
      <div class="announcement-modal-content"></div>
      <div class="announcement-modal-footer">
        <button class="announcement-view-all">View All Announcements</button>
      </div>
    </div>
  </div>

  <!-- Announcements List Modal -->
  <div id="announcements-list-modal" class="announcements-list-modal hidden">
    <div class="announcements-list-backdrop"></div>
    <div class="announcements-list-container">
      <div class="announcements-list-header">
        <h2>News & Announcements</h2>
        <button class="announcements-list-close" aria-label="Close">&times;</button>
      </div>
      <div class="announcements-list"></div>
    </div>
  </div>

  <!-- Game terminal (hidden until login succeeds) -->
  <div id="app" class="hidden">
    <header id="header">
      <h1>MudForge</h1>
      <div id="header-right">
        <div id="clock-container" aria-label="Server time"></div>
        <div class="header-menu">
          <button id="menu-toggle" class="header-button" title="Menu">Menu &#9662;</button>
          <div id="header-menu-dropdown" class="header-menu-dropdown hidden">
            <label class="header-menu-item">
              <input type="checkbox" id="menu-toggle-comm" checked />
              <span>Communications</span>
            </label>
            <label class="header-menu-item">
              <input type="checkbox" id="menu-toggle-debug" />
              <span>Debug Console</span>
            </label>
          </div>
        </div>
        <span id="status" class="disconnected">Disconnected</span>
      </div>
    </header>

    <main id="main-content">
      <div id="left-sidebar">
        <div id="stats-container" aria-label="Player stats"></div>
        <div id="equipment-container" aria-label="Equipment"></div>
      </div>
      <div id="terminal-container">
        <div id="update-banner" class="update-banner hidden" aria-label="Update available">
          <span class="update-banner-text">A new version is available!</span>
          <button id="update-refresh" class="update-refresh-btn">Refresh</button>
          <button id="update-dismiss" class="update-dismiss-btn" aria-label="Dismiss">&times;</button>
        </div>
        <div id="terminal" role="log" aria-live="polite" aria-label="Game output"></div>
        <div id="combat-container" aria-label="Combat target"></div>
        <div id="engage-container" aria-label="NPC dialogue"></div>
        <div id="giphy-container" aria-label="Shared GIFs"></div>
        <div id="comm-container" aria-label="Communications panel"></div>
        <div id="debug-container" aria-label="Debug console"></div>
      </div>
      <div id="right-sidebar">
        <div id="map-container" aria-label="Game map"></div>
        <div id="sky-container" aria-label="Day/night cycle"></div>
        <div id="quest-container" aria-label="Active quests"></div>
        <div id="sound-container" aria-label="Sound controls"></div>
      </div>
    </main>

    <footer id="input-container">
      <label for="input" class="sr-only">Enter command</label>
      <input
        type="text"
        id="input"
        placeholder="Enter command..."
        autocomplete="off"
        autocapitalize="none"
        spellcheck="false"
        aria-label="Command input"
      >
      <button id="send-btn" aria-label="Send command">Send</button>
    </footer>
  </div>

  <script type="module" src="index.js"></script>
</body>
</html>
